<ng-container *ngIf="(clients$ | async) as result" [ngSwitch]="result.dataState">
  <ng-container *ngSwitchCase="DataStateEnum.LOADING">
    <nz-spin nzTip="Loading...">
    </nz-spin>
  </ng-container>
  <ng-container *ngSwitchCase="DataStateEnum.Error">
    <div class="alert alert-danger alert-with-icon">
      <i class="material-icons" data-notify="icon">error_outline</i>
      <button aria-label="Close" class="close" data-dismiss="alert" mat-button type="button"><i class="material-icons">close</i>
      </button>
      <span data-notify="message">
        <b>Error</b>{{result.errorMessage}}</span>
    </div>
  </ng-container>
  <ng-container *ngSwitchCase="DataStateEnum.LOADED">
    <nz-table #nestedTable [nzData]="result.data" [nzPageSize]="10">
      <thead >
      <tr>
        <th class="bg-info" style="color: white"></th>
        <th class="bg-info" style="color: white">Nom Complet</th>
        <th class="bg-info" style="color: white">Email</th>
        <th class="bg-info" style="color: white">Telephone</th>
        <th class="bg-info" style="color: white">Address</th>
        <th class="bg-info" style="color: white">Status</th>
        <th class="bg-info" style="color: white">Action</th>
      </tr>
      </thead>
      <tbody>
      <ng-container *ngFor="let data of nestedTable.data">
        <tr>
          <td (nzExpandChange)="onExpandChange(data.id, $event)" [nzExpand]="expandSet.has(data.id)"></td>
          <td>{{ data.firstName }} {{ data.lastName }}</td>
          <td>{{ data.email }}</td>
          <td>{{ data.phone}}</td>
          <td>{{ data.address}}</td>
          <td>{{ data.isActive }}</td>
          <td>
            <div nz-row nzJustify="space-between" >
            <ng-template [ngIf]="data.isActive==true">
              <a><i class="material-icons" style="color: green" (click)="disableClient(data)">toggle_on</i></a>
            </ng-template>
            <ng-template [ngIf]="data.isActive==false">
              <a><i class="material-icons" style="color: red" (click)="disableClient(data)">toggle_off</i></a>
            </ng-template>
            <a><i class="material-icons" style="color: orange" (click)="deleteClient(data)">delete</i></a>
            <a><i class="material-icons" style="color: #2CA8FF" (click)="displayAlert()">mode_edit</i></a>
            </div>
          </td>
        </tr>
        <tr [nzExpand]="expandSet.has(data.id)">
          <nz-table #innerTable [nzData]="data.compts" nzSize="middle" [nzShowPagination]="false">
             <thead>
    <tr>

      <th style="background-color: orange;color: white">Solde</th>
      <th style="background-color:orange;color: white">Devise</th>
      <th style="background-color: orange;color: white">Type</th>
    </tr>
    </thead>
      <tbody>
      <tr *ngFor="let cmp of innerTable.data" >
        <td>{{ cmp.solde }}</td>
        <td>{{ cmp.devise }}</td>
        <td>{{ cmp.typeCompte }}</td>
      </tr>
      </tbody>
          </nz-table>
        </tr>
       </ng-container>
      </tbody>
    </nz-table>
  </ng-container>

</ng-container>
